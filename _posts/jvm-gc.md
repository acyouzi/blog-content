---
title: jvm垃圾收集与内存分配
date: 2016-11-05 16:35:56
author: "acyouzi"
# cdn: header-off
# header-img: img/dog.jpg
tags:
	- jvm
	- 编程
---

### 对象还活着吗？
垃圾收集要做的第一件事情就是判读一个对象是否还能被访问到，解决这个问题有如下两个方法：
#### 引用计数算法
引用计数算法：通过给对象添加一个引用计数器，每当有一个地方引用计数器加一，引用失效时减一。
这种算法实现简单判定效率高，很多编程语言(如python)都采用这种这种算法进行内存管理，但是他很难解决对象之间相互循环引用的问题，所以java的主流虚拟机没有选用这种算法进行内存管理的
//循环引用图

#### 可达性分析算法
可达性分析算法：通过一些列称为GC Roots的对象作为起始点，从这些节点开始向下搜索，搜索走过的路径称为引用链，当一个对象到GC root没有任何引用链相连则判定为不可达。

GC Roots 对象包括：
* 虚拟机栈
* 方法区中静态属性引用对象
* 方法区中常量引用的对象
* 本地方法栈JNI引用的对象

#### 强引用，软引用，弱引用，虚引用
强引用：只要引用还在永远不会被回收
软引用：由 SoftReference 类实现，在将要发生内存溢出之前会被回收
弱引用：由 WeakReference 类实现，只要垃圾回收工作就会被回收
虚引用：由 PhantomReference 类实现，唯一的作用就是能在这个对象被收集器回收时收到一个系统通知。



